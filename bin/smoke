#!/usr/bin/env ruby

require 'bundler/setup'
require 'typed_ruby'
require 'pry'

registry = TypedRuby::Registry.new
source = <<-RUBY

  class A
    def integer
      123
    end

    def double_integer(i)
      a = integer
      i + i + a
    end
  end

RUBY

registry.load_file('bin/smoke.sig')

ast = TypedRuby::AST::RubyParser.new(file: 'eval', source: source).parse

reducer = TypedRuby::AST::Reducer.new(ast: ast, registry: registry)

result = reducer.result

puts result
